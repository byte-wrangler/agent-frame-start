# Agent æ¶æ„æ–‡æ¡£

> ğŸ“š **å¿«é€Ÿå¼€å§‹**: å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦æœ¬é¡¹ç›®ï¼Œå»ºè®®å…ˆé˜…è¯» [QuickStart.md](QuickStart.md) äº†è§£å¦‚ä½•é…ç½®ç¯å¢ƒå’Œæµ‹è¯•æ¡†æ¶ã€‚

## æ¦‚è¿°

æœ¬é¡¹ç›®åŒ…å«å››ä¸ªä¸åŒçš„ Agent å®ç°ï¼Œå®ƒä»¬ä»£è¡¨äº† Agent æ¶æ„çš„æ¼”è¿›å†ç¨‹ï¼Œä»ç®€å•çš„ Agent æ¨¡å¼é€æ­¥å‘å±•åˆ°æ›´å¤æ‚çš„ ReActï¼ˆReason + Actionï¼‰æ¨¡å¼ï¼Œæœ€ç»ˆå½¢æˆäº†å…·æœ‰ä¸€è‡´æ€§æ£€æŸ¥èƒ½åŠ›çš„ RACï¼ˆReason + Action + Checkï¼‰æ¨¡å¼ã€‚

### å››ä¸ªæ–‡ä»¶çš„å®šä½

1. **agent.py** - åŸºç¡€ Agent å®ç°ï¼ˆç¬¬ä¸€ä»£ï¼‰â†’ [è¯¦ç»†è§£è¯»æ–‡æ¡£](doc/agent_py_è§£è¯»æ–‡æ¡£.md)
2. **react.py** - ReAct æ¨¡å¼å®ç°ï¼ˆç¬¬äºŒä»£ï¼‰â†’ [è¯¦ç»†è§£è¯»æ–‡æ¡£](doc/react_py_è§£è¯»æ–‡æ¡£.md)
3. **react_agent.py** - ç°ä»£åŒ– ReAct Agentï¼ˆç¬¬ä¸‰ä»£ï¼‰â†’ [è¯¦ç»†è§£è¯»æ–‡æ¡£](doc/react_agent_py_è§£è¯»æ–‡æ¡£.md)
4. **rac_agent.py** - RAC Agent å¸¦ä¸€è‡´æ€§æ£€æŸ¥ï¼ˆç¬¬å››ä»£ï¼‰â†’ [è¯¦ç»†è§£è¯»æ–‡æ¡£](doc/rac_agent_py_è§£è¯»æ–‡æ¡£.md)

> ğŸ’¡ **å­¦ä¹ å»ºè®®**ï¼šå¦‚æœä½ æ˜¯åˆå­¦è€…ï¼Œå»ºè®®æŒ‰ç…§é¡ºåºé˜…è¯»ä¸Šè¿°è§£è¯»æ–‡æ¡£ï¼Œæ¯ä¸ªæ–‡æ¡£éƒ½åŒ…å«äº†è¯¦ç»†çš„ä»£ç è§£æã€æ‰§è¡Œæµç¨‹ç¤ºä¾‹å’Œå­¦ä¹ å»ºè®®ã€‚

---

## ä¸€ã€agent.py - åŸºç¡€ Agent å®ç°

> ğŸ“– **è¯¦ç»†è§£è¯»**ï¼šæŸ¥çœ‹ [agent.py å®Œæ•´è§£è¯»æ–‡æ¡£](doc/agent_py_è§£è¯»æ–‡æ¡£.md) äº†è§£æ›´å¤šç»†èŠ‚

### åŠŸèƒ½æ¦‚è¿°
è¿™æ˜¯æœ€åŸºç¡€çš„ Agent å®ç°ï¼Œä½¿ç”¨ç®€å•çš„æ–‡æœ¬æ ¼å¼ä¸ LLM äº¤äº’ï¼Œæ”¯æŒå·¥å…·è°ƒç”¨å’Œæ€è€ƒè¿‡ç¨‹ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

#### 1. æ¶ˆæ¯ç±»å‹
```python
class MessageType(Enum):
    NORMAL = 1      # æ™®é€šæ¶ˆæ¯
    ACTION = 2      # å·¥å…·æ‰§è¡Œæ¶ˆæ¯
    DONE = 3        # å®Œæˆæ¶ˆæ¯
```

#### 2. è¡ŒåŠ¨ç±»å‹
- **ToolAction**: æ‰§è¡Œå·¥å…·è°ƒç”¨
- **ThinkAction**: çº¯æ€è€ƒï¼Œä¸æ‰§è¡Œå·¥å…·
- **FinalAction**: æœ€ç»ˆå›å¤

#### 3. äº¤äº’æ ¼å¼
ä½¿ç”¨ç®€å•çš„ç®¡é“ç¬¦åˆ†éš”æ ¼å¼ï¼š
- è°ƒç”¨å·¥å…·: `call_tool|tool_name|tool_args|reason`
- ç»§ç»­æ€è€ƒ: `continue_think|thought_content`
- æœ€ç»ˆå›å¤: `final_result|content`

#### 4. å·¥ä½œæµç¨‹
```
Observe â†’ Reason â†’ Act
   â†‘                  â†“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- å®ç°ç®€å•ï¼Œæ˜“äºç†è§£
- è½»é‡çº§ï¼Œé€‚åˆç®€å•åœºæ™¯

**ç¼ºç‚¹ï¼š**
- æ¯æ¬¡åªèƒ½è°ƒç”¨ä¸€ä¸ªå·¥å…·
- è¾“å‡ºæ ¼å¼ä¸å¤Ÿæ ‡å‡†åŒ–
- ç¼ºä¹å¤æ‚çš„æ¨ç†èƒ½åŠ›

---

## äºŒã€react.py - ReAct æ¨¡å¼å®ç°

> ğŸ“– **è¯¦ç»†è§£è¯»**ï¼šæŸ¥çœ‹ [react.py å®Œæ•´è§£è¯»æ–‡æ¡£](doc/react_py_è§£è¯»æ–‡æ¡£.md) äº†è§£æ›´å¤šç»†èŠ‚

### åŠŸèƒ½æ¦‚è¿°
å¼•å…¥äº† ReActï¼ˆReasoning and Actingï¼‰æ¨¡å¼ï¼Œå…è®¸ Agent è¿›è¡Œæ›´å¤æ‚çš„æ¨ç†å¹¶æ”¯æŒå¤šå·¥å…·å¹¶è¡Œè°ƒç”¨ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

#### 1. æ¶ˆæ¯ç±»å‹
```python
class MessageType(Enum):
    NORMAL = 1           # æ™®é€šæ¶ˆæ¯
    REASON = 2           # æ¨ç†æ¶ˆæ¯
    TOOL_EXECUTED = 3    # å·¥å…·æ‰§è¡Œå®Œæˆ
    DONE = 4             # å®Œæˆæ¶ˆæ¯
```

#### 2. è¡ŒåŠ¨ç±»å‹
- **ReasonAction**: æ¨ç†è¡ŒåŠ¨ï¼Œå¯åŒ…å«å¤šä¸ªå·¥å…·è°ƒç”¨
- **FinalAction**: æœ€ç»ˆå›å¤

#### 3. äº¤äº’æ ¼å¼
ä½¿ç”¨ JSON æ ¼å¼è¿›è¡Œäº¤äº’ï¼š
```json
{
    "type": "reason",
    "content": "æ¨ç†å†…å®¹",
    "tool_calls": [
        {"tool_name": "tool1", "tool_args": {...}},
        {"tool_name": "tool2", "tool_args": {...}}
    ]
}
```

#### 4. å·¥ä½œæµç¨‹
```
Observe â†’ Reason (å¯åŒ…å«å¤šå·¥å…·è°ƒç”¨) â†’ Act â†’ Observe
   â†‘                                            â†“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- æ”¯æŒå¤šå·¥å…·å¹¶è¡Œè°ƒç”¨
- JSON æ ¼å¼æ›´ç»“æ„åŒ–
- å¼•å…¥äº† ReAct æ€æƒ³

**ç¼ºç‚¹ï¼š**
- ä½¿ç”¨è‡ªå®šä¹‰ JSON æ ¼å¼ï¼Œéæ ‡å‡†
- ä¸ç°ä»£ LLM å·¥å…·è°ƒç”¨æ ¼å¼ä¸å…¼å®¹

---

## ä¸‰ã€react_agent.py - ç°ä»£åŒ– ReAct Agent

> ğŸ“– **è¯¦ç»†è§£è¯»**ï¼šæŸ¥çœ‹ [react_agent.py å®Œæ•´è§£è¯»æ–‡æ¡£](doc/react_agent_py_è§£è¯»æ–‡æ¡£.md) äº†è§£æ›´å¤šç»†èŠ‚

### åŠŸèƒ½æ¦‚è¿°
é‡‡ç”¨æ ‡å‡† OpenAI å·¥å…·è°ƒç”¨æ ¼å¼çš„ç°ä»£åŒ– ReAct Agent å®ç°ï¼Œæ˜¯ RAC Agent çš„åŸºç¡€æ¡†æ¶ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

#### 1. æ¶ˆæ¯ç±»å‹
```python
class MessageType(Enum):
    SYSTEM = "system"       # ç³»ç»Ÿæ¶ˆæ¯
    USER = "user"          # ç”¨æˆ·æ¶ˆæ¯
    ASSISTANT = "assistant" # åŠ©æ‰‹æ¶ˆæ¯
    TOOL = "tool"          # å·¥å…·æ¶ˆæ¯
    DONE = "done"          # å®Œæˆæ¶ˆæ¯
```

#### 2. Message ç±»è®¾è®¡
ä½¿ç”¨ Pydantic BaseModelï¼Œæ”¯æŒä¸ LLM æ¶ˆæ¯æ ¼å¼çš„åŒå‘è½¬æ¢ï¼š
- `to_llm_message()`: è½¬æ¢ä¸º LLM æ ¼å¼
- `from_llm_message()`: ä» LLM æ ¼å¼è½¬æ¢

#### 3. å·¥å…·è°ƒç”¨æ ¼å¼
é‡‡ç”¨ OpenAI æ ‡å‡†æ ¼å¼ï¼š
```python
{
    "type": "function",
    "function": {
        "name": "tool_name",
        "description": "...",
        "parameters": {...}
    }
}
```

#### 4. æ ¸å¿ƒç»„ä»¶

**ReasonAction**:
- æ‰§è¡Œæ¨ç†å’Œå·¥å…·è°ƒç”¨
- æ”¯æŒæ ‡å‡†çš„ ChatCompletionMessageToolCall
- è‡ªåŠ¨å¤„ç†å·¥å…·æ‰§è¡Œç»“æœ

**Memory**:
- åŸºäº Pydantic çš„æ¶ˆæ¯å­˜å‚¨
- æ”¯æŒæ¶ˆæ¯å†å²ç®¡ç†
- å¯è®¾ç½®æœ€å¤§æ¶ˆæ¯æ•°é‡

**Environment**:
- æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†
- æ”¯æŒä¸Šä¸‹æ–‡å­˜å‚¨
- æ¶ˆæ¯æ¶ˆè´¹æœºåˆ¶

**TerminateTool**:
- å†…ç½®ç»ˆæ­¢å·¥å…·
- ç”¨äºç»“æŸäº¤äº’

#### 5. é˜²å¡ä½æœºåˆ¶
- æ£€æµ‹é‡å¤æ€è€ƒ: `_is_stuck()`
- è‡ªåŠ¨æç¤ºé¿å…é‡å¤

#### 6. å·¥ä½œæµç¨‹
```
Observe â†’ Reason â†’ Act
   â†‘                 â†“
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- ä½¿ç”¨æ ‡å‡† OpenAI å·¥å…·è°ƒç”¨æ ¼å¼
- ä»£ç ç»“æ„æ¸…æ™°ï¼Œä½¿ç”¨ç°ä»£ Python ç‰¹æ€§ï¼ˆPydanticï¼‰
- æ”¯æŒå¤šå·¥å…·å¹¶è¡Œè°ƒç”¨
- å†…ç½®é˜²å¡ä½æœºåˆ¶
- æ¶ˆæ¯æ ¼å¼æ ‡å‡†åŒ–

**ç¼ºç‚¹ï¼š**
- ç¼ºä¹æ‰§è¡Œç»“æœéªŒè¯æœºåˆ¶
- æ— æ³•æ£€æµ‹æ¨ç†ä¸æ‰§è¡Œçš„ä¸€è‡´æ€§

---

## å››ã€rac_agent.py - RAC Agent å¸¦ä¸€è‡´æ€§æ£€æŸ¥

> ğŸ“– **è¯¦ç»†è§£è¯»**ï¼šæŸ¥çœ‹ [rac_agent.py å®Œæ•´è§£è¯»æ–‡æ¡£](doc/rac_agent_py_è§£è¯»æ–‡æ¡£.md) äº†è§£æ›´å¤šç»†èŠ‚

### åŠŸèƒ½æ¦‚è¿°
åœ¨ ReAct Agent åŸºç¡€ä¸Šå¢åŠ äº† Checkï¼ˆæ£€æŸ¥ï¼‰æ­¥éª¤ï¼Œç”¨äºéªŒè¯æ¨ç†å’Œæ‰§è¡Œçš„ä¸€è‡´æ€§ï¼Œç¡®ä¿ Agent çš„è¡Œä¸ºç¬¦åˆé¢„æœŸã€‚

### æ ¸å¿ƒç‰¹ç‚¹

#### 1. RAC ä¸‰æ­¥å¾ªç¯
```
Reason (æ¨ç†) â†’ Action (æ‰§è¡Œ) â†’ Check (æ£€æŸ¥)
     â†‘                                â†“
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. CheckAction ç±»
ä¸“é—¨ç”¨äºä¸€è‡´æ€§éªŒè¯çš„è¡ŒåŠ¨ç±»ï¼š

**æ£€æŸ¥é¡¹ç›®ï¼š**
1. **å·¥å…·è°ƒç”¨å®Œæ•´æ€§**: éªŒè¯æ‰€æœ‰è®¡åˆ’çš„å·¥å…·æ˜¯å¦éƒ½è¢«æ‰§è¡Œ
2. **æ‰§è¡Œæ•°é‡åŒ¹é…**: æ£€æŸ¥æ¨ç†ä¸­çš„å·¥å…·æ•°é‡ä¸å®é™…æ‰§è¡Œæ•°é‡æ˜¯å¦ä¸€è‡´
3. **æ‰§è¡Œé”™è¯¯æ£€æµ‹**: è¯†åˆ«å·¥å…·æ‰§è¡Œè¿‡ç¨‹ä¸­çš„é”™è¯¯
4. **æ¨ç†é€»è¾‘è¿è´¯æ€§**: éªŒè¯æ€è€ƒå†…å®¹æ˜¯å¦æåŠå®é™…ä½¿ç”¨çš„å·¥å…·
5. **ç»ˆæ­¢é€»è¾‘éªŒè¯**: ç¡®ä¿ç»ˆæ­¢è°ƒç”¨ä¸å®Œæˆæ¶ˆæ¯çš„ä¸€è‡´æ€§

#### 3. CheckResult æ¨¡å‹
```python
class CheckResult(BaseModel):
    success: bool                    # æ£€æŸ¥æ˜¯å¦æˆåŠŸ
    consistency_score: float         # ä¸€è‡´æ€§å¾—åˆ† (0-1)
    issues: List[str]               # å‘ç°çš„é—®é¢˜åˆ—è¡¨
    recommendations: List[str]       # æ”¹è¿›å»ºè®®
```

#### 4. ä¸€è‡´æ€§è¯„åˆ†æœºåˆ¶
- åˆå§‹åˆ†æ•°: 1.0
- æ¯å‘ç°ä¸€ä¸ªé—®é¢˜æ‰£åˆ†
- é˜ˆå€¼: 0.7ï¼ˆå¯é…ç½®ï¼‰
- ä½äºé˜ˆå€¼è§†ä¸ºæ£€æŸ¥å¤±è´¥

#### 5. å¤±è´¥å¤„ç†
å½“æ£€æŸ¥å¤±è´¥æ—¶ï¼š
1. è®°å½•å¤±è´¥åŸå› å’Œå»ºè®®
2. å°†å¤±è´¥æ¶ˆæ¯æ·»åŠ åˆ°ç¯å¢ƒ
3. ç»§ç»­ä¸‹ä¸€è½®å¾ªç¯
4. Agent å¯ä»¥æ ¹æ®åé¦ˆè°ƒæ•´ç­–ç•¥

#### 6. å¯é…ç½®å‚æ•°
```python
RACAgent(
    description="...",
    model="qwen-max-latest",
    tools=[...],
    check_threshold=0.7,  # ä¸€è‡´æ€§é˜ˆå€¼
)

agent.run(
    env=env,
    max_steps=50,
    enable_check=True,  # æ˜¯å¦å¯ç”¨æ£€æŸ¥
)
```

#### 7. å·¥ä½œæµç¨‹
```
Observe â†’ Reason â†’ Action â†’ Check
   â†‘                           â†“
   â”‚    (æ£€æŸ¥é€šè¿‡)              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†‘                           â†“
   â”‚    (æ£€æŸ¥å¤±è´¥ï¼Œé‡æ–°æ¨ç†)    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹ï¼š**
- å¢åŠ äº†æ‰§è¡ŒéªŒè¯æœºåˆ¶ï¼Œæé«˜å¯é æ€§
- å¯é‡åŒ–çš„ä¸€è‡´æ€§è¯„åˆ†
- è¯¦ç»†çš„é—®é¢˜è¯Šæ–­å’Œå»ºè®®
- å¯é…ç½®çš„æ£€æŸ¥é˜ˆå€¼
- å¯é€‰å¯ç”¨/ç¦ç”¨æ£€æŸ¥åŠŸèƒ½
- ç»§æ‰¿äº† ReAct Agent çš„æ‰€æœ‰ä¼˜ç‚¹

**ç¼ºç‚¹ï¼š**
- å¢åŠ äº†é¢å¤–çš„è®¡ç®—å¼€é”€
- æ£€æŸ¥é€»è¾‘éœ€è¦æŒç»­ä¼˜åŒ–
- å¯¹äºç®€å•ä»»åŠ¡å¯èƒ½è¿‡åº¦å·¥ç¨‹åŒ–

---

## æ¶æ„æ¼”è¿›å¯¹æ¯”

| ç‰¹æ€§ | agent.py | react.py | react_agent.py | rac_agent.py |
|------|----------|----------|----------------|--------------|
| **æ¨ç†æ¨¡å¼** | ç®€å•æ¨ç† | ReAct | ReAct | RAC |
| **å·¥å…·è°ƒç”¨æ ¼å¼** | æ–‡æœ¬æ ¼å¼ | JSON | OpenAI æ ‡å‡† | OpenAI æ ‡å‡† |
| **å¤šå·¥å…·å¹¶è¡Œ** | âŒ | âœ… | âœ… | âœ… |
| **ä¸€è‡´æ€§æ£€æŸ¥** | âŒ | âŒ | âŒ | âœ… |
| **é˜²å¡ä½æœºåˆ¶** | âŒ | âŒ | âœ… | âœ… |
| **æ¶ˆæ¯æ ‡å‡†åŒ–** | åŸºç¡€ | ä¸­ç­‰ | å®Œæ•´ | å®Œæ•´ |
| **ä»£ç ç°ä»£åŒ–** | åŸºç¡€ | åŸºç¡€ | Pydantic | Pydantic |
| **é€‚ç”¨åœºæ™¯** | ç®€å•ä»»åŠ¡ | ä¸­ç­‰å¤æ‚ | å¤æ‚ä»»åŠ¡ | å…³é”®ä»»åŠ¡ |

---

## ä½¿ç”¨å»ºè®®

### é€‰æ‹© agent.py çš„åœºæ™¯
- æç®€å•çš„å·¥å…·è°ƒç”¨åœºæ™¯
- å­¦ä¹  Agent åŸºç¡€æ¦‚å¿µ
- å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯

### é€‰æ‹© react.py çš„åœºæ™¯
- éœ€è¦å¤šå·¥å…·å¹¶è¡Œè°ƒç”¨
- æ—§é¡¹ç›®ç»´æŠ¤
- ä¸ä¾èµ– OpenAI æ ¼å¼

### é€‰æ‹© react_agent.py çš„åœºæ™¯
- æ ‡å‡†çš„ Agent åº”ç”¨
- éœ€è¦ä¸ç°ä»£ LLM é›†æˆ
- éœ€è¦æ¸…æ™°çš„ä»£ç ç»“æ„
- å¤§å¤šæ•°ç”Ÿäº§ç¯å¢ƒ

### é€‰æ‹© rac_agent.py çš„åœºæ™¯
- å¯¹å¯é æ€§è¦æ±‚é«˜çš„åœºæ™¯
- éœ€è¦éªŒè¯ Agent æ‰§è¡Œæ­£ç¡®æ€§
- å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡
- éœ€è¦é—®é¢˜è¯Šæ–­èƒ½åŠ›
- å…³é”®ä¸šåŠ¡é€»è¾‘

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### å…±åŒä¾èµ–
æ‰€æœ‰å®ç°éƒ½ä¾èµ–ï¼š
- `LlmCaller`: LLM è°ƒç”¨å°è£…
- `event`: äº‹ä»¶ç³»ç»Ÿ
- `loguru`: æ—¥å¿—è®°å½•

### æ ¸å¿ƒè®¾è®¡æ¨¡å¼

1. **è§‚å¯Ÿè€…æ¨¡å¼**: Environment ç®¡ç†æ¶ˆæ¯é˜Ÿåˆ—
2. **ç­–ç•¥æ¨¡å¼**: ä¸åŒçš„ Action ç±»å‹
3. **æ¨¡æ¿æ¨¡å¼**: Agent çš„ run æ–¹æ³•å®šä¹‰ä¸»å¾ªç¯
4. **å·¥å‚æ¨¡å¼**: Tool çš„åˆ›å»ºå’Œç®¡ç†

### Memory ç®¡ç†

- **agent.py & react.py**: ç®€å•åˆ—è¡¨å­˜å‚¨
- **react_agent.py & rac_agent.py**: Pydantic æ¨¡å‹ï¼Œæ”¯æŒæ¶ˆæ¯é™åˆ¶

### æ¶ˆæ¯æµè½¬

```
User Input â†’ Environment â†’ Agent.observe() 
    â†’ Agent.reason() â†’ Action.execute() 
    â†’ Environment â†’ Agent.observe() â†’ ...
```

---

## æœ€ä½³å®è·µ

### 1. é€‰æ‹©åˆé€‚çš„å®ç°
æ ¹æ®ä»»åŠ¡å¤æ‚åº¦å’Œå¯é æ€§è¦æ±‚é€‰æ‹©ï¼š
- ç®€å•ä»»åŠ¡ â†’ agent.py
- æ ‡å‡†ä»»åŠ¡ â†’ react_agent.py
- å…³é”®ä»»åŠ¡ â†’ rac_agent.py

### 2. å·¥å…·è®¾è®¡
- ç»§æ‰¿ Tool åŸºç±»
- å®ç° execute æ–¹æ³•
- æä¾›æ¸…æ™°çš„æè¿°å’Œå‚æ•°å®šä¹‰

### 3. Prompt è®¾è®¡
- ä½¿ç”¨ COT_PROMPT å¼•å¯¼æ€è€ƒ
- ä½¿ç”¨ FOCUS_PROMPT é¿å…é‡å¤
- é’ˆå¯¹ç‰¹å®šé¢†åŸŸå®šåˆ¶ç³»ç»Ÿæç¤º

### 4. é”™è¯¯å¤„ç†
- å®ç° ActionResult é”™è¯¯ä¼ é€’
- åœ¨ Environment ä¸­è®°å½•é”™è¯¯æ¶ˆæ¯
- åˆ©ç”¨ RAC çš„æ£€æŸ¥æœºåˆ¶æ•è·é—®é¢˜

### 5. æ€§èƒ½ä¼˜åŒ–
- è®¾ç½®åˆç†çš„ max_steps
- ä½¿ç”¨ Memory çš„æ¶ˆæ¯é™åˆ¶
- åœ¨ä¸éœ€è¦æ—¶ç¦ç”¨ check

---

## æ€»ç»“

è¿™å››ä¸ªæ–‡ä»¶å±•ç¤ºäº† Agent æ¶æ„ä»ç®€å•åˆ°å¤æ‚çš„æ¼”è¿›è¿‡ç¨‹ï¼š

1. **agent.py**: è¯æ˜äº†åŸºç¡€ Agent æ¦‚å¿µçš„å¯è¡Œæ€§
2. **react.py**: å¼•å…¥äº† ReAct æ€æƒ³ï¼Œæå‡äº†æ¨ç†èƒ½åŠ›
3. **react_agent.py**: é‡‡ç”¨ç°ä»£åŒ–æŠ€æœ¯æ ˆï¼Œæ ‡å‡†åŒ–äº†å®ç°
4. **rac_agent.py**: åœ¨å¯é æ€§ä¸Šæ›´è¿›ä¸€æ­¥ï¼Œå¢åŠ äº†éªŒè¯æœºåˆ¶

å¯¹äºæ–°é¡¹ç›®ï¼Œå»ºè®®ä¼˜å…ˆè€ƒè™‘ **react_agent.py** ä½œä¸ºèµ·ç‚¹ï¼Œå¦‚æœå¯¹å¯é æ€§æœ‰æ›´é«˜è¦æ±‚ï¼Œåˆ™ä½¿ç”¨ **rac_agent.py**ã€‚æ—§çš„å®ç°ï¼ˆagent.py å’Œ react.pyï¼‰ä¸»è¦ç”¨äºç»´æŠ¤å’Œå­¦ä¹ ç›®çš„ã€‚

---

## é™„å½•ï¼šä»£ç ç¤ºä¾‹

### ä½¿ç”¨ react_agent.py
```python
from .react_agent import ReActAgent, Environment, Tool

# å®šä¹‰å·¥å…·
tools = [...]

# åˆ›å»º Agent
agent = ReActAgent(
    description="Your agent description",
    model="qwen-max-latest",
    tools=tools
)

# åˆ›å»ºç¯å¢ƒå¹¶è¿è¡Œ
env = Environment(initial_message="ç”¨æˆ·é—®é¢˜")
result = agent.run(env, max_steps=20)
```

### ä½¿ç”¨ rac_agent.py
```python
from .rac_agent import RACAgent
from .react_agent import Environment, Tool

# å®šä¹‰å·¥å…·
tools = [...]

# åˆ›å»º RAC Agent
agent = RACAgent(
    description="Your agent description",
    model="qwen-max-latest",
    tools=tools,
    check_threshold=0.7
)

# åˆ›å»ºç¯å¢ƒå¹¶è¿è¡Œï¼ˆå¯ç”¨æ£€æŸ¥ï¼‰
env = Environment(initial_message="ç”¨æˆ·é—®é¢˜")
result = agent.run(env, max_steps=50, enable_check=True)
```

---

## å­¦ä¹ èµ„æº

### ğŸ“š è¯¦ç»†è§£è¯»æ–‡æ¡£

æœ¬é¡¹ç›®ä¸ºæ¯ä¸ª Agent å®ç°éƒ½æä¾›äº†è¯¦ç»†çš„è§£è¯»æ–‡æ¡£ï¼Œé€‚åˆä¸åŒæ°´å¹³çš„å­¦ä¹ è€…ï¼š

1. **[agent.py è§£è¯»æ–‡æ¡£](doc/agent_py_è§£è¯»æ–‡æ¡£.md)** - åŸºç¡€ Agent æ¦‚å¿µå…¥é—¨
   - é€‚åˆåˆå­¦è€…ç†è§£ Agent çš„åŸºæœ¬å·¥ä½œåŸç†
   - åŒ…å«å®Œæ•´çš„æ‰§è¡Œæµç¨‹ç¤ºä¾‹å’Œä»£ç è§£æ

2. **[react.py è§£è¯»æ–‡æ¡£](doc/react_py_è§£è¯»æ–‡æ¡£.md)** - ReAct æ¨¡å¼è¯¦è§£
   - ç†è§£ Reasoning + Acting çš„æ ¸å¿ƒæ€æƒ³
   - å­¦ä¹ å¦‚ä½•å®ç°å¤šå·¥å…·å¹¶è¡Œè°ƒç”¨

3. **[react_agent.py è§£è¯»æ–‡æ¡£](doc/react_agent_py_è§£è¯»æ–‡æ¡£.md)** - ç”Ÿäº§çº§å®ç°
   - å­¦ä¹  Pydantic æ•°æ®éªŒè¯å’Œæ¶ˆæ¯è½¬æ¢æœºåˆ¶
   - ç†è§£é˜²é‡å¤æ€è€ƒç­‰é«˜çº§ç‰¹æ€§

4. **[rac_agent.py è§£è¯»æ–‡æ¡£](doc/rac_agent_py_è§£è¯»æ–‡æ¡£.md)** - RAC æ¨¡å¼ä¸ä¸€è‡´æ€§æ£€æŸ¥
   - æ·±å…¥ç†è§£ä¸€è‡´æ€§æ£€æŸ¥çš„äº”é¡¹æœºåˆ¶
   - å­¦ä¹ å¦‚ä½•æé«˜ Agent çš„å¯é æ€§

### ğŸ“ æ¨èå­¦ä¹ è·¯å¾„

**åˆå­¦è€…è·¯å¾„**ï¼š
```
agent.py è§£è¯» â†’ react.py è§£è¯» â†’ react_agent.py è§£è¯» â†’ rac_agent.py è§£è¯»
```

**å¿«é€Ÿä¸Šæ‰‹è·¯å¾„**ï¼ˆå·²æœ‰ Agent åŸºç¡€ï¼‰ï¼š
```
react_agent.py è§£è¯» â†’ rac_agent.py è§£è¯»
```

---

## å‚è€ƒä¸å¯å‘

æœ¬é¡¹ç›®çš„è®¾è®¡å’Œå®ç°å—åˆ°ä»¥ä¸‹ä¼˜ç§€èµ„æºçš„å¯å‘ï¼š

1. **[Building Effective Agents](https://www.anthropic.com/engineering/building-effective-agents)** - Anthropic
   - Anthropic å…³äºæ„å»ºæœ‰æ•ˆ Agent çš„å·¥ç¨‹å®è·µå’Œè®¾è®¡æ€æƒ³

2. **[OpenManus](https://github.com/FoundationAgents/OpenManus)** - FoundationAgents
   - å¼€æºçš„ Agent æ¡†æ¶å®ç°ï¼Œæä¾›äº†ä¸°å¯Œçš„å‚è€ƒæ¡ˆä¾‹